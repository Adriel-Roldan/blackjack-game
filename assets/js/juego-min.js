(()=>{"use strict";let e=[],a=["C","D","H","S"],r=["A","J","K","Q"],t=[0,0],l=document.querySelector("#btnPedir"),s=document.querySelector("#btnRetirarse"),d=document.querySelector("#btnNuevo"),n=document.querySelectorAll("small"),i=document.querySelectorAll(".divCartas"),o=(a=2)=>{e=c(),t=[];for(let r=0;r<a;r++)t.push(0);n.forEach(e=>e.innerHTML=0),i.forEach(e=>e.innerHTML=""),l.disabled=!1,s.disabled=!1},c=()=>{e=[];for(let t=2;t<=10;t++)for(a of a)e.push(t+a);for(a of a)for(r of r)e.push(r+a);return _.shuffle(e)};o();let u=()=>{if(0===e.length)throw"Ya no hay m\xe1s cartas en la baraja";return e.pop()},$=e=>{let a=e.substring(0,e.length-1);return isNaN(a)?"A"===a?11:10:1*a},b=(e,a)=>(t[a]+=$(e),n[a].innerText=t[a],t[a]),f=(e,a)=>{let r=document.createElement("img");r.src=`assets/cartas/${e}.png`,r.classList.add("carta"),i[a].append(r)},g=e=>{let a=0;do{let r=u();a=b(r,0),f(r,0)}while(a<e&&e<=21);h()},h=()=>{let[e,a]=t;setTimeout(()=>{a===e?alert("Es un empate!"):a>21?alert("Computadora gana!"):e>21?alert("Jugador gana!"):a>e||21===a?alert("Jugador gana!"):(e>a||21===e)&&alert("Computadora gana!")},80)};l.addEventListener("click",()=>{let e=u(),a=b(e,1);f(e,1),a>21?(console.warn("Perdiste! Te pasaste de 21"),l.disabled=!0,s.disabled=!0,g(a)):21===a&&(console.warn("Conseguiste hacer 21!"),l.disabled=!0,s.disabled=!0,g(a))}),s.addEventListener("click",()=>{l.disabled=!0,s.disabled=!0,g(t[1])}),d.addEventListener("click",()=>{console.clear(),o()})})();